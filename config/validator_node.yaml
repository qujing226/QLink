# QLink验证节点配置
node:
  id: "validator-1"
  role: "validator"
  data_dir: "./data/validator"
  log_level: "info"
  enable_metrics: true
  metrics_port: 9091

network:
  listen_address: "0.0.0.0:7001"
  bootstrap_peers:
    - "/ip4/127.0.0.1/tcp/7000/p2p/12D3KooWGateway"
  max_peers: 50
  connection_timeout: "30s"
  enable_nat: false
  enable_relay: true
  enable_discovery: true
  discovery_interval: "30s"

consensus:
  algorithm: "raft"
  enable: true
  raft:
    node_id: "validator-1"
    listen_address: "127.0.0.1:8001"
    data_dir: "./data/validator/raft"
    snapshot_interval: "120s"
    snapshot_threshold: 1024
    heartbeat_timeout: "1s"
    election_timeout: "1s"
    commit_timeout: "50ms"
    max_append_entries: 64
    batch_apply_ch: true
    trailing_logs: 10240
    snapshot_catchup_entries: 1024

cluster:
  enable: true
  cluster_id: "qlink-cluster"
  initial_members:
    - id: "gateway-1"
      address: "127.0.0.1:8000"
    - id: "validator-1"
      address: "127.0.0.1:8001"
  join_timeout: "30s"
  heartbeat_interval: "5s"
  election_timeout: "10s"

did:
  enable: true
  registry_type: "local"
  resolver_cache_size: 1000
  resolver_cache_ttl: "1h"

# 验证节点不开启API服务
api:
  enable: false

storage:
  type: "leveldb"
  path: "./data/validator/storage"
  cache_size: 64
  write_buffer_size: 32

sync:
  enable: true
  sync_interval: "30s"
  batch_size: 100
  max_retry: 3
  retry_interval: "5s"

logging:
  level: "info"
  format: "json"
  output: "stdout"
  file_path: "./logs/validator.log"
  max_size: 100
  max_backups: 3
  max_age: 28
  compress: true