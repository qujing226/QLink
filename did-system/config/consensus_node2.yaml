# 共识节点2配置 - 只负责共识和数据同步
node:
  id: "consensus-node2"
  name: "qlink-consensus2"
  version: "1.0.0"
  data_dir: "./data/consensus2"
  role: "consensus"
  port: 30302
  capabilities: ["consensus", "sync", "did"]

network:
  listen_address: "0.0.0.0"
  port: 30302
  bootstrap_peers:
    - "/ip4/127.0.0.1/tcp/30300/p2p/gateway"
    - "/ip4/127.0.0.1/tcp/30301/p2p/node1"
    - "/ip4/127.0.0.1/tcp/30303/p2p/node3"
  max_peers: 50
  enable_discovery: true

consensus:
  algorithm: "raft"
  enable: true
  raft:
    node_id: "node2"
    cluster_size: 3
    election_timeout: "5s"
    heartbeat_timeout: "2s"
    peers:
      - id: "node1"
        address: "127.0.0.1:30301"
      - id: "node2"
        address: "127.0.0.1:30302"
      - id: "node3"
        address: "127.0.0.1:30303"

cluster:
  enable: true
  node_id: "node2"
  peers: ["node1", "node3", "gateway"]
  sync_interval: "10s"

did:
  enable: true
  registry_address: "0x1234567890123456789012345678901234567890"
  resolver_address: "0x0987654321098765432109876543210987654321"

# 共识节点不开启API服务
api:
  listen_address: "127.0.0.1"
  listen_port: 0  # 不监听API端口
  port: 0
  debug: false
  enable_cors: false
  enable_metrics: false
  enable_rate_limit: false
  enable: false  # 明确禁用API服务

storage:
  type: "leveldb"
  path: "./data/consensus2/storage"
  cache_size: 64
  write_buffer_size: 32

sync:
  enable: true
  interval: "30s"
  batch_size: 100
  timeout: "10s"

logging:
  level: "info"
  format: "json"
  output: "./data/consensus2.log"
  max_size: 100
  max_backups: 3
  max_age: 7
  compress: true