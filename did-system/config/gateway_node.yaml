# API网关节点配置 - 负责对外API交互
node:
  id: "gateway-node"
  name: "qlink-gateway"
  version: "1.0.0"
  data_dir: "./data/gateway"
  role: "gateway"
  port: 30300
  capabilities: ["api", "did"]

network:
  listen_address: "0.0.0.0"
  port: 30300
  bootstrap_peers:
    - "/ip4/127.0.0.1/tcp/30301/p2p/node1"
    - "/ip4/127.0.0.1/tcp/30302/p2p/node2"
    - "/ip4/127.0.0.1/tcp/30303/p2p/node3"
  max_peers: 50
  enable_discovery: true

consensus:
  algorithm: "raft"
  enable: false  # 网关节点不参与共识
  raft:
    node_id: "gateway"
    cluster_size: 3
    election_timeout: "5s"
    heartbeat_timeout: "2s"

cluster:
  enable: true
  node_id: "gateway"
  peers: ["node1", "node2", "node3"]
  sync_interval: "10s"

did:
  enable: true
  registry_address: "0x1234567890123456789012345678901234567890"
  resolver_address: "0x0987654321098765432109876543210987654321"

# API网关节点开启完整的API服务
api:
  enable: true  # 明确启用API服务
  listen_address: "0.0.0.0"
  listen_port: 8080
  port: 8080
  debug: true
  enable_cors: true
  enable_metrics: true
  enable_rate_limit: true
  rate_limit: 1000
  read_timeout: "30s"
  write_timeout: "30s"
  max_request_size: 1048576

storage:
  type: "leveldb"
  path: "./data/gateway/storage"
  cache_size: 64
  write_buffer_size: 32

sync:
  enable: true
  interval: "30s"
  batch_size: 100
  timeout: "10s"

logging:
  level: "info"
  format: "json"
  output: "./data/gateway.log"
  max_size: 100
  max_backups: 3
  max_age: 7
  compress: true